<!-- templates/index.html -->
<!DOCTYPE html>
<html lang="en" x-data="{ formType: null, success: {{ 'true' if success else 'false' }} }">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Thermal Printer Interface</title>
  <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
  <style>
    body { font-family: sans-serif; max-width: 500px; margin: auto; padding: 1rem; }
    textarea { width: 100%; min-height: 120px; margin-top: 0.5rem; }
    button, input[type="submit"] {
      background: black; color: white; padding: 0.75rem 1.2rem;
      border: none; margin-top: 1rem; cursor: pointer; font-size: 1rem;
    }
    .back-btn { background: #444; margin-left: 0.5rem; }
    .card { border: 1px solid #ddd; padding: 1rem; margin: 1rem 0; }
    [x-cloak] { display: none !important; }
  </style>
</head>
<body>

  <h1>🖨️ Scribbles</h1>

  <!-- ✅ Success Message -->
  <div x-show="success" class="card" x-transition x-cloak>
    ✅ Submission received and printed!
    <br>
    <button @click="formType = null; success = false" class="back-btn">Submit Another</button>
  </div>

  <!-- 🚀 Selection -->
  <div x-show="!formType && !success" x-transition x-cloak>
    <p>Select what you’d like to print:</p>
    <button @click="formType = 'todo'">📋 Todo</button>
    <button @click="formType = 'note'">📝 Note</button>
    <button @click="formType = 'photo'">📷 Photo</button>
  </div>

  <!-- 📝 Form -->
  <form action="/submit" method="post" enctype="multipart/form-data" x-show="formType" x-transition x-cloak>
    <input type="hidden" name="formType" :value="formType">

    <!-- Todo Form -->
    <div x-show="formType === 'todo'" class="card" x-cloak>
      <label>Enter your todo list (Markdown format)</label>
      <textarea name="todo_text" placeholder="- [ ] Task one\n- [x] Done task"></textarea>
    </div>

    <!-- Note Form -->
    <div x-show="formType === 'note'" class="card" x-cloak>
      <label>Write a note:</label>
      <textarea name="note_text" placeholder="Remember to smile today."></textarea>
    </div>

    <!-- Photo Form -->
    <div x-show="formType === 'photo'" class="card" x-cloak>
      <label>Upload a photo to print:</label>
      <input type="file" name="photo_file" accept="image/*" :required="formType === 'photo'" />
    </div>

    <!-- Footer Quote Toggle -->
    <div style="margin-top: 1rem;">
      <label><input type="checkbox" name="include_quote" /> Include motivational quote</label>
    </div>

    <input type="submit" value="🖨️ Print" />
    <button type="button" @click="formType = null" class="back-btn">⬅️ Back</button>
  </form>

</body>
</html>
